<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ãƒã‚±ãƒ¢ãƒ³ãƒãƒˆãƒ«é¢¨ã‚²ãƒ¼ãƒ </title>
  <style>
    body {
      background: linear-gradient(#6db3f2, #1e69de);
      color: #fff;
      font-family: 'Press Start 2P', sans-serif;
      text-align: center;
      margin: 0;
      padding: 0;
    }

    .battle-field {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: space-between;
      height: 100%;
      padding: 20px;
    }

    /* --------- ãƒã‚±ãƒ¢ãƒ³ç”»åƒï¼ˆãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ï¼‰ --------- */
    .pokemon {
      width: min(35vw, 180px);
      margin: 8px;
      position: relative;
      transition: opacity 1s, transform 0.8s;
    }

    img {
      width: 100%;
      height: auto;
    }

    /* --------- HPãƒãƒ¼ï¼ˆãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ï¼‰ --------- */
    .hp-bar {
      width: min(45vw, 230px);
      height: 20px;
      background: #333;
      border: 2px solid #fff;
      border-radius: 5px;
      margin: 5px auto;
    }

    .hp-inner {
      height: 100%;
      background: limegreen;
      width: 100%;
      transition: width 0.5s;
    }

    /* --------- æ•µ & ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼é…ç½® --------- */
    .enemy, .player {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .enemy {
      align-self: flex-end;
    }

    .player {
      align-self: flex-start;
      margin-top:-20%;
    }

    /* --------- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ --------- */
    .message-box {
      background: rgba(0,0,0,0.6);
      border: 2px solid #fff;
      padding: 20px;
      margin-top: 15px;
      width: 85%;
      height: 100px;
      font-size: 12px;
      text-align: left;
      overflow: hidden;
    }

    /* --------- æ”»æ’ƒãƒœã‚¿ãƒ³ï¼ˆãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ï¼‰ --------- */
    .attack-buttons {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      margin-top: 10px;
      padding-bottom: 20px;
    }

    .attack-buttons button {
      margin: 5px;
      padding: 10px 14px;
      background: #ffcb05;
      border: 2px solid #2a75bb;
      border-radius: 10px;
      font-size: 10px;
      cursor: pointer;
      transition: 0.2s;
    }

    .attack-buttons button:hover {
      background: #ffdf5d;
      transform: scale(1.05);
    }

    .hidden {
      display: none;
    }

    #restart {
      background: #4caf50;
      border: 2px solid #fff;
      padding: 12px 20px;
      font-size: 12px;
      border-radius: 10px;
      cursor: pointer;
      margin-top: 10px;
      display: none;
    }

    #restart:hover {
      background: #6cd56f;
    }

    .faint {
      opacity: 0;
      transform: rotate(90deg) translateY(50px);
    }

    /* --------- å°ã•ã„ç”»é¢å‘ã‘èª¿æ•´ ---------- */
    /* ======= ã‚¹ãƒãƒ›ï¼ˆ600pxä»¥ä¸‹ï¼‰é™å®šèª¿æ•´ ======= */
@media (max-width: 600px) {

/* â–¼ ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å´ã®ç”»åƒã‚’ã‚‚ã£ã¨ä¸Šã¸ */
.player {
  margin-top: -20px; /* â† ã“ã“ã§ç”»åƒã‚’ä¸Šã¸æŒã¡ä¸Šã’ã‚‹ */
}
.player .pokemon {
  width: 40vw;       /* å°‘ã—ã ã‘å°ã•ãã—ã¦åã¾ã‚Šã‚’è‰¯ãã™ã‚‹ */
}

/* â–¼ æ•µã‚‚å°‘ã—èª¿æ•´ã—ã¦å…¨ä½“ãƒãƒ©ãƒ³ã‚¹UPï¼ˆä»»æ„ï¼‰ */
.enemy .pokemon {
  width: 38vw;
}

/* â–¼ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸BOXã‚’å¤§ããã—ã¦è¦‹ã‚„ã™ã */
.message-box {
  width: 92%;
  height: 110px;       /* â† é«˜ã•ã‚’å¢—ã‚„ã—ã¦èª­ã¿ã‚„ã™ã */
  font-size: 12px;     /* â† ãƒ•ã‚©ãƒ³ãƒˆUP */
  padding: 30px;
  line-height: 1.5;
  margin-top: 15px;    /* å°‘ã—ä½™ç™½ã‚’è¶³ã™ */
}

/* â–¼ ãƒœã‚¿ãƒ³ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆ2Ã—2ï¼‰ã‚’ç¶­æŒ */
.attack-buttons {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
  width: 92%;
  margin-top: 10px;
}

.attack-buttons button {
  font-size: 10px;
  padding: 12px 5px;
}

/* â–¼ HPãƒãƒ¼ã‚‚å°‘ã—èª¿æ•´ */
.hp-bar {
  width: 85%;
  height: 18px;
}
}


/* --- ã‚¹ãƒãƒ›ç”»é¢ï¼ˆæœ€å¤§å¹… 600px ä»¥ä¸‹ï¼‰ã®ã¨ãã ã‘é©ç”¨ --- */
@media screen and (max-width: 600px) {

/* ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ç”»åƒã‚’ã‚‚ã£ã¨ä¸Šã¸ */
.player .pokemon {
  margin-top: -50px;   /* â† ä¸Šã«è©°ã‚ã‚‹é‡ã€‚ã‚‚ã£ã¨ä¸Šã’ãŸã„ãªã‚‰ -80px ãªã© */
  transform: scale(0.9); /* ç”»åƒã‚’å°‘ã—å°ã•ãã—ã¦è¦‹ã‚„ã™ã */
}

/* ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸BOXã‚’å¤§ãã */
.message-box {
  height: 200px;  /* â† å¥½ã¿ã§èª¿æ•´ï¼š120ã€œ200px */
  font-size: 14px;
  padding: 200px;
}

/* ãƒœã‚¿ãƒ³ä½ç½®ã‚’ä¸‹ã«ã¾ã¨ã‚ã‚‹ï¼ˆã‚®ãƒ¥ãƒƒã¨è¦‹ã‚„ã™ãï¼‰ */
.attack-buttons {
  margin-top: 5px;
}

.attack-buttons button {
  padding: 12px;
  font-size: 12px;
}

/* æ•µå´ã®ç”»åƒä½ç½®ã‚‚å°‘ã—èª¿æ•´ã—ãŸã„å ´åˆ */
.enemy .pokemon {
  margin-top: -20px;
}
}
#restart {
  display: none;
  background: #4caf50;
  border: 2px solid #fff;
  padding: 12px 20px;
  font-size: 14px;
  border-radius: 12px;
  cursor: pointer;
  margin-top: 20px;
}

#restart:hover {
  background: #6cd56f;
}

/* ã‚¹ãƒãƒ›æ¨ªå‘ãæ™‚ã®ãƒªã‚¹ã‚¿ãƒ¼ãƒˆä½ç½®èª¿æ•´ */
@media (max-width: 600px) and (orientation: landscape) {
  #restart {
    font-size: 12px;
    padding: 10px 14px;
    margin-top: 8px;
  }
}
/* ======= ã‚¹ãƒãƒ›æ¨ªå‘ãï¼ˆãƒ©ãƒ³ãƒ‰ã‚¹ã‚±ãƒ¼ãƒ—ï¼‰å°‚ç”¨ ======= */
@media (max-width: 600px) and (orientation: landscape) {

/* ä¸Šä¸‹ã§ã¯ãªãæ¨ªã«ä¸¦ã¹ã‚‹ */
.battle-field {
  flex-direction: row;
  gap: 20px;
  padding: 10px;
}

/* ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¨æ•µã‚’å·¦å³é…ç½® */
.enemy, .player {
  width: 45%;
  margin: 0;
}

.pokemon {
  width: 30vw;
}

/* ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸BOXã‚’ä¸‹ã«æ¨ªé•·ã§è¡¨ç¤º */
.message-box {
  position: absolute;
  bottom: 10px;
  left: 5%;
  width: 90%;
  height: 80px;
  font-size: 10px;
  padding: 8px;
}

/* ãƒœã‚¿ãƒ³ã‚’ã•ã‚‰ã«ä¸‹ã«ã¾ã¨ã‚ã‚‹ */
.attack-buttons {
  position: absolute;
  
  left: 5%;
  width: 90%;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 5px;
}

/* HPãƒãƒ¼ã‚‚æ¨ªå‘ãç”¨ã«èª¿æ•´ */
.hp-bar {
  width: 35vw;
  height: 14px;
}
}

  </style>
</head>

<body>
  <div class="battle-field">

    <!-- æ•µãƒã‚±ãƒ¢ãƒ³ï¼ˆç”»åƒã‚’ä¸Š â†’ HPãƒãƒ¼ã‚’ä¸‹ã¸ï¼‰ -->
    <div class="enemy">
      <div class="pokemon" id="enemyPokemon">
        <img src="img/itinu.png">
      </div>
      <div class="hp-bar"><div class="hp-inner" id="enemyHp"></div></div>
    </div>

    <!-- ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒã‚±ãƒ¢ãƒ³ -->
    <div class="player">
      <div class="pokemon" id="playerPokemon">
        <img src="img/uenu.png">
      </div>
      <div class="hp-bar"><div class="hp-inner" id="playerHp"></div></div>
    </div>

    <div class="message-box" id="message">ã„ã¡ã¬ãŒç¾ã‚ŒãŸï¼</div>

    <div class="attack-buttons" id="buttons">
      <button onclick="attack('ãŸã„ã‚ãŸã‚Š')">ãŸã„ã‚ãŸã‚Š</button>
      <button onclick="attack('é…ä¿¡')">é…ä¿¡</button>
      <button onclick="attack('ãªãã”ãˆ')">ãªãã”ãˆ</button>
      <button onclick="attack('ã‹ã‚‰ã‚ã’')">ã‹ã‚‰ã‚ã’</button>
    </div>

    <button id="restart" onclick="restartGame()">ãƒªã‚¹ã‚¿ãƒ¼ãƒˆ</button>
  </div>

  <script>
    let playerHP = 100;
    let enemyHP = 100;
    const message = document.getElementById('message');
    const playerHpBar = document.getElementById('playerHp');
    const enemyHpBar = document.getElementById('enemyHp');
    const playerMon = document.getElementById('playerPokemon');
    const enemyMon = document.getElementById('enemyPokemon');
    const restartBtn = document.getElementById('restart');
    const buttons = document.getElementById('buttons');

    function updateHpBars() {
      playerHpBar.style.width = playerHP + '%';
      enemyHpBar.style.width = enemyHP + '%';
      if (playerHP < 40) playerHpBar.style.background = 'orange';
      if (playerHP < 20) playerHpBar.style.background = 'red';
      if (enemyHP < 40) enemyHpBar.style.background = 'orange';
      if (enemyHP < 20) enemyHpBar.style.background = 'red';
    }

    function attack(move) {
      if (playerHP <= 0 || enemyHP <= 0) return;
      let damage = Math.floor(Math.random() * 20) + 5;
      enemyHP -= damage;
      if (enemyHP < 0) enemyHP = 0;
      message.textContent = `ã‚¦ã‚§ãƒ³ã®${move}! æ•µã«${damage}ã®ãƒ€ãƒ¡ãƒ¼ã‚¸!`;
      updateHpBars();

      if (enemyHP <= 0) {
        enemyMon.classList.add('faint');
        message.textContent = "ã„ã¡ã¬ã¯ãŸãŠã‚ŒãŸï¼ ã„ã¡ã¬ã€Œè¨±ã•ãªã„ã¬ã€";
        buttons.classList.add('hidden');
        restartBtn.style.display = 'inline-block';
        return;
      }

      buttons.classList.add('hidden');
      setTimeout(() => {
        let enemyDamage = Math.floor(Math.random() * 15) + 5;
        playerHP -= enemyDamage;
        if (playerHP < 0) playerHP = 0;
        message.textContent = `ã„ã¡ã¬ã®å‘ªã„ï¼ ${enemyDamage}ã®ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼`;
        updateHpBars();

        if (playerHP <= 0) {
          playerMon.classList.add('faint');
          message.textContent = "ã‚¦ã‚§ãƒ³ã¯ãŸãŠã‚ŒãŸâ€¦ ğŸ˜¢ã„ã¡ã¬ã¯ã‚±ãƒ©ã‚±ãƒ©ç¬‘ã£ã¦ã„ã‚‹";
          restartBtn.style.display = 'inline-block';
        } else {
          setTimeout(() => {
            message.textContent = "ã©ã†ã™ã‚‹ï¼Ÿ";
            buttons.classList.remove('hidden');
          }, 1000);
        }
      }, 1200);
    }

    function restartGame() {
      playerHP = 100;
      enemyHP = 100;
      updateHpBars();
      message.textContent = "æ‡²ã‚Šãªã„ã‚„ã¤ã¬";
      playerHpBar.style.background = "limegreen";
      enemyHpBar.style.background = "limegreen";
      playerMon.classList.remove('faint');
      enemyMon.classList.remove('faint');
      buttons.classList.remove('hidden');
      restartBtn.style.display = 'none';
    }

    updateHpBars();
  </script>
</body>
</html>
